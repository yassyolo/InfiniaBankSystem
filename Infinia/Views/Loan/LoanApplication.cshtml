@model Infinia.Core.ViewModels.LoanApplicationHistoryViewModel
@{
	Layout = null;
}
<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Подробности за вашия кредит - Infinia</title>
    <!-- Bootstrap -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Навигационен бар -->
    <nav class="navbar navbar-expand-lg main-nav">
        <a class="navbar-brand logo" asp-controller="Home" asp-action="Index">Infinia</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav ml-auto">
                <!-- Dropdown за "Средства" -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="fundsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Средства
                    </a>
                    <div class="dropdown-menu" aria-labelledby="fundsDropdown">
                        <a class="dropdown-item" asp-controller="Account" asp-action="Index">Проверка на сметки</a>
                    </div>
                </li>
                <!-- Dropdown за "Кредити" -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="loansDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Кредити
                    </a>
                    <div class="dropdown-menu" aria-labelledby="loansDropdown">
                        <a class="dropdown-item" asp-controller="Loan" asp-action="CurrentLoans">Моите кредити</a>
                        <a class="dropdown-item" asp-controller="Loan" asp-action="ChooseLoanType">Заявка за кредит</a>
                        <a class="dropdown-item" asp-controller="Loan" asp-action="LoanApplicationsHistory">История на заявките за кредити</a>
                    </div>
                </li>
                <!-- Dropdown за "Преводи" -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="transfersDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Преводи
                    </a>
                    <div class="dropdown-menu" aria-labelledby="transfersDropdown">
                        <a class="dropdown-item" asp-controller="Transaction" asp-action="Index">Нов превод</a>
                    </div>
                </li>
                <!-- Dropdown за "Настройки" -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="settingsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Настройки
                    </a>
                    <div class="dropdown-menu" aria-labelledby="settingsDropdown">
                        <a class="dropdown-item" asp-controller="Profile" asp-action="ProfileDetails">Общи</a>
                        <a class="dropdown-item" asp-controller="Profile" asp-action="ChangeUsername">Потребителско име</a>
                        <a class="dropdown-item" asp-controller="Profile" asp-action="ChangePassword">Парола</a>
                        <a class="dropdown-item" asp-controller="Profile" asp-action="Logout">Логаут</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container loan-details mt-5">
        <h2 class="text-center mb-4">Подробности за вашия кредит</h2>

        <!-- Основна информация -->
        <div class="form-section">
            <h4>1. Основна информация</h4>
            <p><strong>Сума на кредита:</strong>@Model.LoanAmount лв.</p>
            <p><strong>Период:</strong>@Model.LoanTermMonths месеца</p>
            <p><strong>Лихва:</strong>@Model.InterestRate %</p>
            @switch (@Model.Type)
            {
                case "Personal Loan":
                    <p><strong>Тип на кредита:</strong>Потребителски кредит</p>
                    break;
                case "Car Loan":
                    <p><strong>Тип на кредита:</strong>Ауто кредит</p>
                    break;
                case "Morgage Loan":
                    <p><strong>Тип на кредита:</strong>Ипотечен кредит</p>
                    break;
                case "Business Loan":
                    <p><strong>Тип на кредита:</strong>Бизнес кредит</p>
                    break;
                case "Education Loan":
                    <p><strong>Тип на кредита:</strong>Кредит за образование </p>
                    break;
            }
            
            <p><strong>Дата на плащане всеки месец:</strong>@Model.LoanRepaymentNumber-то число</p>
            <p><strong>Статус:</strong>@Model.Status Одобрен</p>
        </div>

        <!-- Образование -->
        <div class="form-section">
            <h4>2. Образование</h4>
            <p><strong>Ниво на образование:</strong>@Model.EducationLevel</p>
        </div>

        <!-- Информация за работодател -->
        <div class="form-section">
            <h4>3. Информация за работодател</h4>
            <p><strong>Пенсионер:</strong>@Model.IsRetired Не</p>
            <p><strong>Име на работодателя:</strong>@Model.EmployerName</p>
            <p><strong>Позиция:</strong>@Model.Position</p>
            <p><strong>Години в работата:</strong>@Model.YearsAtJob </p>
            <p><strong>Месеци в работата:</strong>@Model.MonthsAtJob </p>
            <p><strong>Общ стаж:</strong>@Model.TotalWorkExperienceYears години и @Model.TotalWorkExperienceMonths месеца</p>
        </div>

        <!-- Информация за домакинството -->
        <div class="form-section">
            <h4>4. Информация за домакинството</h4>
            <p><strong>Членове на домакинството:</strong>@Model.NumberOfHouseholdMembers 4</p>
            <p><strong>Членове с доказан доход:</strong>@Model.MembersWithProvenIncome 2</p>
            <p><strong>Зависими от дохода:</strong>@Model.Dependents 1</p>
        </div>

        <!-- Информация за доходи -->
        <div class="form-section">
            <h4>5. Информация за доходи</h4>
            <p><strong>Нето доход:</strong>@Model.NetMonthlyIncome 3000 лв.</p>
            <p><strong>Фиксирани месечни разходи:</strong>@Model.FixedMonthlyExpenses 1000 лв.</p>
            <p><strong>Нето от постоянен договор:</strong>@Model.PermanentContractIncome 2000 лв.</p>
            <p><strong>Нето от временен договор:</strong>@Model.TemporaryContractIncome 500 лв.</p>
            <p><strong>Нето от държавен договор:</strong>@Model.CivilContractIncome 0 лв.</p>
            <p><strong>Нето от бизнес:</strong>@Model.BusinessIncome 500 лв.</p>
            <p><strong>Нето от фрийленс:</strong>@Model.FreelanceIncome 300 лв.</p>
            <p><strong>Други доходи:</strong>@Model.OtherIncome 200 лв.</p>
            <p><strong>Имате ли други кредити:</strong>@Model.HasOtherCredits Не</p>
        </div>

        <!-- Информация за имущество -->
        <div class="form-section">
            <h4>6. Информация за имущество</h4>
            <p><strong>Къща или апартамент:</strong>@Model.HasApartmentOrHouse Да</p>
            <p><strong>Обществено имущество:</strong>@Model.HasCommercialProperty Не</p>
            <p><strong>Земя:</strong>@Model.HasLand Да</p>
            <p><strong>Други имуществени обекти:</strong>@Model.HasMultipleProperties Да</p>
            <p><strong>Колко коли притежавате:</strong>@Model.VehicleCount 1</p>
        </div>
        <!-- Диаграма за кредитен рейтинг и рискова група -->
        <div class="form-section">
            <h4>Вашият кредитен рейтинг и рискова група</h4>

            <!-- Gauge for Credit Score -->
            <div id="creditScoreGauge" style="width:200px; height:160px;"></div>
            <p><strong>Вашият кредитен рейтинг:</strong> @Model.CreditScore</p>

            <!-- Risk Group -->
            <p><strong>Рискова група:</strong> @Model.RiskGroup</p>
        </div>

        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>


        <!-- Raphael.js (required for JustGage) -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script>

        <!-- JustGage library -->
        <script src="https://cdn.jsdelivr.net/npm/justgage@1.3.1/justgage.min.js"></script>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                var g = new JustGage({
                    id: "creditScoreGauge",
                    value: @(Model.CreditScore.ToString("F0")), // The credit score from your model
                    min: 300,
                    max: 850,
                    title: "Кредитен Рейтинг",
                    label: "Точки",
                    levelColors: ["#ff0000", "#ff9900", "#00ff00"], // Red, Orange, Green for Low, Medium, High
                    levelColorsThresholds: [500, 700] // Thresholds for Low, Medium, High
                });
            });
        </script>
</body>
</html>